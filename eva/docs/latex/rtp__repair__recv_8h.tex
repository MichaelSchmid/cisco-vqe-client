\section{rtp\_\-repair\_\-recv.h File Reference}
\label{rtp__repair__recv_8h}\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
{\tt \#include $<$utils/vam\_\-types.h$>$}\par
{\tt \#include $<$rtp/rtp\_\-ptp.h$>$}\par
{\tt \#include \char`\"{}vqec\_\-recv\_\-socket.h\char`\"{}}\par
{\tt \#include \char`\"{}vqec\_\-rtp.h\char`\"{}}\par
{\tt \#include \char`\"{}vqec\_\-channel\_\-api.h\char`\"{}}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \bf{rtp\_\-repair\_\-recv\_\-methods\_\-t\_\-}
\item 
struct \bf{rtp\_\-repair\_\-recv\_\-t\_\-}
\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define \bf{RTP\_\-REPAIR\_\-RECV\_\-METHODS}
\item 
\#define \bf{RTP\_\-REPAIR\_\-RECV\_\-INFO}
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef \bf{rtp\_\-repair\_\-recv\_\-methods\_\-t\_\-} \bf{rtp\_\-repair\_\-recv\_\-methods\_\-t}
\item 
typedef \bf{rtp\_\-repair\_\-recv\_\-t\_\-} \bf{rtp\_\-repair\_\-recv\_\-t}
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
boolean \bf{rtp\_\-repair\_\-recv\_\-init\_\-module} (uint32\_\-t max\_\-sessions)
\item 
\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$ \bf{rtp\_\-create\_\-session\_\-repair\_\-recv} (vqec\_\-dp\_\-streamid\_\-t dp\_\-id, in\_\-addr\_\-t src\_\-addr, char $\ast$cname, in\_\-addr\_\-t fbt\_\-ip\_\-addr, uint16\_\-t $\ast$recv\_\-rtcp\_\-port, uint16\_\-t send\_\-rtcp\_\-port, uint32\_\-t local\_\-ssrc, rtcp\_\-bw\_\-cfg\_\-t $\ast$rtcp\_\-bw\_\-cfg, rtcp\_\-xr\_\-cfg\_\-t $\ast$rtcp\_\-xr\_\-cfg, in\_\-addr\_\-t orig\_\-source\_\-addr, uint16\_\-t orig\_\-source\_\-port, uint32\_\-t sock\_\-buf\_\-depth, uint8\_\-t rtcp\_\-dscp\_\-value, uint8\_\-t rtcp\_\-rsize, struct \bf{vqec\_\-chan\_\-} $\ast$parent\_\-chan)
\item 
boolean \bf{rtp\_\-update\_\-session\_\-repair\_\-recv} (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$p\_\-repair\_\-recv, in\_\-addr\_\-t fbt\_\-ip\_\-addr, uint16\_\-t send\_\-rtcp\_\-port)
\item 
void \bf{rtp\_\-delete\_\-session\_\-repair\_\-recv} (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$$\ast$p\_\-repair\_\-recv\_\-sess, boolean deallocate)
\item 
void \bf{rtp\_\-show\_\-session\_\-repair\_\-recv} (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$p\_\-sess)
\item 
uint32\_\-t \bf{rtcp\_\-construct\_\-report\_\-repair\_\-recv} (rtp\_\-session\_\-t $\ast$p\_\-sess, rtp\_\-member\_\-t $\ast$p\_\-source, rtcptype $\ast$p\_\-rtcp, uint32\_\-t bufflen, rtcp\_\-pkt\_\-info\_\-t $\ast$p\_\-pkt\_\-info, boolean reset\_\-xr\_\-stats)
\item 
void \bf{rtp\_\-session\_\-repair\_\-recv\_\-send\_\-bye} (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$pp\_\-repair\_\-recv)
\item 
\bf{vqec\_\-chanid\_\-t} \bf{rtp\_\-repair\_\-session\_\-chanid} (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$p\_\-repair)
\end{CompactItemize}


\subsection{Define Documentation}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!RTP_REPAIR_RECV_INFO@{RTP\_\-REPAIR\_\-RECV\_\-INFO}}
\index{RTP_REPAIR_RECV_INFO@{RTP\_\-REPAIR\_\-RECV\_\-INFO}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define RTP\_\-REPAIR\_\-RECV\_\-INFO}\label{rtp__repair__recv_8h_d33a588855ee03cd04426148cde38020}


\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!RTP_REPAIR_RECV_METHODS@{RTP\_\-REPAIR\_\-RECV\_\-METHODS}}
\index{RTP_REPAIR_RECV_METHODS@{RTP\_\-REPAIR\_\-RECV\_\-METHODS}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define RTP\_\-REPAIR\_\-RECV\_\-METHODS}\label{rtp__repair__recv_8h_16ed17642aff377c7e53af7fc5fdea0a}


\textbf{Value:}

\begin{Code}\begin{verbatim}RTP_PTP_METHODS                 \
                                    \                                                         \
    void (*process_upcall_event)(struct rtp_repair_recv_t_ *this, \
                                 vqec_dp_rtp_src_table_t *table); \                                                           \
    void (*primary_pktflow_src_update)(struct rtp_repair_recv_t_ *this, \
                                       rtp_source_id_t *id);            \
                                                                        \                                                                 \
    boolean (*send_to_rtcp_socket)(struct rtp_repair_recv_t_ *this,     \
                                   in_addr_t remote_addr,               \
                                   in_port_t remote_port,               \
                                   char *buf,                           \
                                   uint16_t len);                       \
\end{verbatim}\end{Code}


\subsection{Typedef Documentation}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_repair_recv_methods_t@{rtp\_\-repair\_\-recv\_\-methods\_\-t}}
\index{rtp_repair_recv_methods_t@{rtp\_\-repair\_\-recv\_\-methods\_\-t}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef struct \bf{rtp\_\-repair\_\-recv\_\-methods\_\-t\_\-}  \bf{rtp\_\-repair\_\-recv\_\-methods\_\-t}}\label{rtp__repair__recv_8h_655bc4d5d95e29a828f08d79245f2e23}


\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_repair_recv_t@{rtp\_\-repair\_\-recv\_\-t}}
\index{rtp_repair_recv_t@{rtp\_\-repair\_\-recv\_\-t}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}typedef struct \bf{rtp\_\-repair\_\-recv\_\-t\_\-}  \bf{rtp\_\-repair\_\-recv\_\-t}}\label{rtp__repair__recv_8h_6191a31f4e0ab9076c18af5234288680}


rtp\_\-repair\_\-recv\_\-t 

\subsection{Function Documentation}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtcp_construct_report_repair_recv@{rtcp\_\-construct\_\-report\_\-repair\_\-recv}}
\index{rtcp_construct_report_repair_recv@{rtcp\_\-construct\_\-report\_\-repair\_\-recv}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}uint32\_\-t rtcp\_\-construct\_\-report\_\-repair\_\-recv (rtp\_\-session\_\-t $\ast$ {\em p\_\-sess}, rtp\_\-member\_\-t $\ast$ {\em p\_\-source}, rtcptype $\ast$ {\em p\_\-rtcp}, uint32\_\-t {\em bufflen}, rtcp\_\-pkt\_\-info\_\-t $\ast$ {\em p\_\-pkt\_\-info}, boolean {\em reset\_\-xr\_\-stats})}\label{rtp__repair__recv_8h_4a35775b17d59b406634fee753d7eee4}


\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_create_session_repair_recv@{rtp\_\-create\_\-session\_\-repair\_\-recv}}
\index{rtp_create_session_repair_recv@{rtp\_\-create\_\-session\_\-repair\_\-recv}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\bf{rtp\_\-repair\_\-recv\_\-t}$\ast$ rtp\_\-create\_\-session\_\-repair\_\-recv (vqec\_\-dp\_\-streamid\_\-t {\em dp\_\-id}, in\_\-addr\_\-t {\em src\_\-addr}, char $\ast$ {\em cname}, in\_\-addr\_\-t {\em fbt\_\-ip\_\-addr}, uint16\_\-t $\ast$ {\em recv\_\-rtcp\_\-port}, uint16\_\-t {\em send\_\-rtcp\_\-port}, uint32\_\-t {\em local\_\-ssrc}, rtcp\_\-bw\_\-cfg\_\-t $\ast$ {\em rtcp\_\-bw\_\-cfg}, rtcp\_\-xr\_\-cfg\_\-t $\ast$ {\em rtcp\_\-xr\_\-cfg}, in\_\-addr\_\-t {\em orig\_\-source\_\-addr}, uint16\_\-t {\em orig\_\-source\_\-port}, uint32\_\-t {\em sock\_\-buf\_\-depth}, uint8\_\-t {\em rtcp\_\-dscp\_\-value}, uint8\_\-t {\em rtcp\_\-rsize}, \bf{vqec\_\-chan\_\-t} $\ast$ {\em parent\_\-chan})}\label{rtp__repair__recv_8h_9b43f7ef4ddeef46e843fbf5ab074634}


--------------------------------------------------------------------------- Create the session structure for an repair-recv RTP/RTCP session.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em dp\_\-id}]- Dataplane session identifier. \item[\mbox{$\leftarrow$} {\em src\_\-addr}]- Sessions src address to use for transmitting packets. \item[\mbox{$\leftarrow$} {\em cname}]- SDES cname for this session. \item[\mbox{$\leftarrow$} {\em fbt\_\-ip\_\-addr}]- IP address of feedback target. \item[\mbox{$\leftarrow$} {\em recv\_\-rtcp\_\-port}]- RTCP port number of recv sock repair session. If the port number is 0, an ephemeral port will be allocated. \item[\mbox{$\leftarrow$} {\em send\_\-rtcp\_\-port}]- Remote rtcp port number of repair session (may be 0, which means don't do RTCP) \item[\mbox{$\leftarrow$} {\em local\_\-ssrc}]- SSRC of the local source \item[\mbox{$\leftarrow$} {\em rtcp\_\-bw\_\-cfg}]- Ptr to RTCP bandwidth config info \item[\mbox{$\leftarrow$} {\em rtcp\_\-xr\_\-cfg}]- Ptr to RTCP XR config info \item[\mbox{$\leftarrow$} {\em orig\_\-source\_\-addr}]- Original channel source address. \item[\mbox{$\leftarrow$} {\em orig\_\-source\_\-port}]- Original channel source port. \item[\mbox{$\leftarrow$} {\em sock\_\-buf\_\-depth}]- Socket input buffer depth in bytes. \item[\mbox{$\leftarrow$} {\em rtcp\_\-dscp\_\-value}]- DSCP class for RTCP packets. \item[\mbox{$\leftarrow$} {\em rtcp\_\-rsize}]- Boolean flag for setting Reduced Size RTCP \item[\mbox{$\leftarrow$} {\em parent\_\-chan}]- Parent channel ptr. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Pointer to a repair session. --------------------------------------------------------------------------- \end{Desc}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_delete_session_repair_recv@{rtp\_\-delete\_\-session\_\-repair\_\-recv}}
\index{rtp_delete_session_repair_recv@{rtp\_\-delete\_\-session\_\-repair\_\-recv}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void rtp\_\-delete\_\-session\_\-repair\_\-recv (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$$\ast$ {\em pp\_\-repair\_\-recv\_\-sess}, boolean {\em deallocate})}\label{rtp__repair__recv_8h_03d375760a41a6fe50378bfdd533e0fb}


--------------------------------------------------------------------------- Frees a session. The session will be cleaned first using rtp\_\-cleanup\_\-session.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em pp\_\-sess}]ptr ptr to session object \item[\mbox{$\leftarrow$} {\em deallocate}]boolen to check if the object should be destroyed --------------------------------------------------------------------------- \end{description}
\end{Desc}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_repair_recv_init_module@{rtp\_\-repair\_\-recv\_\-init\_\-module}}
\index{rtp_repair_recv_init_module@{rtp\_\-repair\_\-recv\_\-init\_\-module}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}boolean rtp\_\-repair\_\-recv\_\-init\_\-module (uint32\_\-t {\em max\_\-sessions})}\label{rtp__repair__recv_8h_341a71fb87c931353f51e2a1d85c05fc}


Function: rtp\_\-repair\_\-recv\_\-init\_\-module Description: One time (class level) initialization of various function tables \begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em max\_\-sessions}]The maximum number of repair sessions to be created MUST BE AT LEAST 1. \item[\mbox{$\rightarrow$} {\em boolean}]TRUE(1) if successfully initialized this module else returns FALSE(0). \end{description}
\end{Desc}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_repair_session_chanid@{rtp\_\-repair\_\-session\_\-chanid}}
\index{rtp_repair_session_chanid@{rtp\_\-repair\_\-session\_\-chanid}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\bf{vqec\_\-chanid\_\-t} rtp\_\-repair\_\-session\_\-chanid (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$ {\em p\_\-repair})}\label{rtp__repair__recv_8h_4820478135788dfb92428daa334b2ca6}


--------------------------------------------------------------------------- From a repair session to channel identifier of parent channel.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em p\_\-repair}]Pointer to the repair session. \item[\mbox{$\rightarrow$} {\em vqec\_\-chanid\_\-t}]Parent channel's id. --------------------------------------------------------------------------- \end{description}
\end{Desc}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_session_repair_recv_send_bye@{rtp\_\-session\_\-repair\_\-recv\_\-send\_\-bye}}
\index{rtp_session_repair_recv_send_bye@{rtp\_\-session\_\-repair\_\-recv\_\-send\_\-bye}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void rtp\_\-session\_\-repair\_\-recv\_\-send\_\-bye (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$ {\em pp\_\-repair\_\-recv})}\label{rtp__repair__recv_8h_a24b309f4dc43c934a1d0d73fb38cccf}


--------------------------------------------------------------------------- Send a BYE on the repair session.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em pp\_\-repair\_\-recv}]Pointer to the repair session. --------------------------------------------------------------------------- \end{description}
\end{Desc}
\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_show_session_repair_recv@{rtp\_\-show\_\-session\_\-repair\_\-recv}}
\index{rtp_show_session_repair_recv@{rtp\_\-show\_\-session\_\-repair\_\-recv}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void rtp\_\-show\_\-session\_\-repair\_\-recv (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$ {\em p\_\-sess})}\label{rtp__repair__recv_8h_f5512608ba29d4342b401ef07646e38d}


\index{rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}!rtp_update_session_repair_recv@{rtp\_\-update\_\-session\_\-repair\_\-recv}}
\index{rtp_update_session_repair_recv@{rtp\_\-update\_\-session\_\-repair\_\-recv}!rtp_repair_recv.h@{rtp\_\-repair\_\-recv.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}boolean rtp\_\-update\_\-session\_\-repair\_\-recv (\bf{rtp\_\-repair\_\-recv\_\-t} $\ast$ {\em p\_\-repair\_\-recv}, in\_\-addr\_\-t {\em fbt\_\-ip\_\-addr}, uint16\_\-t {\em send\_\-rtcp\_\-port})}\label{rtp__repair__recv_8h_40c0c2567996ea54f866f61490a7ac05}


--------------------------------------------------------------------------- Update the session structure for an repair-recv RTP/RTCP session.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftarrow$} {\em fbt\_\-ip\_\-addr}]IP address of feedback target. \item[\mbox{$\leftarrow$} {\em send\_\-rtcp\_\-port}]Remote rtcp port number of repair session (may be 0, which means don't do RTCP) \item[\mbox{$\rightarrow$} {\em boolean}]TRUE upon successful update, FALSE otherwise --------------------------------------------------------------------------- \end{description}
\end{Desc}
