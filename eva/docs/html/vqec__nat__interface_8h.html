<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VQE-C: vqec_nat_interface.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>vqec_nat_interface.h File Reference</h1><code>#include &lt;stunclient/vqec_nat_api.h&gt;</code><br>
<code>#include &quot;vqec_error.h&quot;</code><br>
<code>#include &quot;<a class="el" href="vqec__syscfg_8h.html">vqec_syscfg.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">vqec_error_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#83633147de37d3301648f68a352304ea">vqec_nat_module_init</a> (<a class="el" href="vqec__syscfg_8h.html#2453bdcecf833d8893d760746c00e6f3">vqec_syscfg_sig_mode_t</a> mode, vqec_nat_proto_t proto, vqec_nat_init_params_t *params)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#a36b72241b333e6268eb9c0bc3761449">vqec_nat_module_deinit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vqec_nat_bindid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#c74d504ee5e09aabf2362fd74f414fb0">vqec_nat_open_binding</a> (vqec_nat_bind_desc_t *desc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#cdca6fc3afa0147f86504eaaf531ca89">vqec_nat_close_binding</a> (vqec_nat_bindid_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#11f5bd7a7ac577f32a1e90a2da0c78a2">vqec_nat_query_binding</a> (vqec_nat_bindid_t id, vqec_nat_bind_data_t *data, boolean refresh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#09109143f3deb6fef2d3023a748f06c4">vqec_nat_fprint_binding</a> (vqec_nat_bindid_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#2d793836b5a6eb9960fd6a319a9865ad">vqec_nat_fprint_all_bindings</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#cc358fb4fc880240511b24b1003e9d10">vqec_nat_fprint_all_bindings_safe</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#a72964d0432ce95945839d0ce77d6bc7">vqec_nat_eject_to_binding</a> (vqec_nat_bindid_t id, char *buf, uint16_t len, in_addr_t source_ip, in_port_t source_port)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#3ff22996ca5865f197472e49376ff6fc">vqec_nat_enable_debug</a> (boolean verbose)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#64d18e023ac58deec48f819796f07917">vqec_nat_disable_debug</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#fcb807b3a55de54bfa848411d6bb1c34">vqec_nat_is_behind_nat</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__interface_8h.html#3633769cdfeadc830826ee6ff1da092d">vqec_nat_is_natmode_en</a> (void)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="cdca6fc3afa0147f86504eaaf531ca89"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_close_binding" ref="cdca6fc3afa0147f86504eaaf531ca89" args="(vqec_nat_bindid_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_close_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Close an open binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="64d18e023ac58deec48f819796f07917"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_disable_debug" ref="64d18e023ac58deec48f819796f07917" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_disable_debug           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Disable debugging on protocol. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="a72964d0432ce95945839d0ce77d6bc7"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_eject_to_binding" ref="a72964d0432ce95945839d0ce77d6bc7" args="(vqec_nat_bindid_t id, char *buf, uint16_t len, in_addr_t source_ip, in_port_t source_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_eject_to_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_addr_t&nbsp;</td>
          <td class="paramname"> <em>source_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&nbsp;</td>
          <td class="paramname"> <em>source_port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Forward an eject packet to the protocol for a binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>Contents of the packet. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the packet. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>source_ip,:</em>&nbsp;</td><td>source ip of the packet (ip of the pak sender) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>source_port,:</em>&nbsp;</td><td>source port of the packet --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3ff22996ca5865f197472e49376ff6fc"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_enable_debug" ref="3ff22996ca5865f197472e49376ff6fc" args="(boolean verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_enable_debug           </td>
          <td>(</td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>verbose</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Enable debugging on protocol.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>verbose</em>&nbsp;</td><td>Enable a more verbose mode. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="2d793836b5a6eb9960fd6a319a9865ad"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_fprint_all_bindings" ref="2d793836b5a6eb9960fd6a319a9865ad" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_all_bindings           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of all bindings. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="cc358fb4fc880240511b24b1003e9d10"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_fprint_all_bindings_safe" ref="cc358fb4fc880240511b24b1003e9d10" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_all_bindings_safe           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of all bindings, with acquisition of the global lock. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="09109143f3deb6fef2d3023a748f06c4"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_fprint_binding" ref="09109143f3deb6fef2d3023a748f06c4" args="(vqec_nat_bindid_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of a binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fcb807b3a55de54bfa848411d6bb1c34"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_is_behind_nat" ref="fcb807b3a55de54bfa848411d6bb1c34" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_is_behind_nat           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Is the device behind a NAT?<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>false if it the protocol has determined that the device is not behind a NAT, true otherwise. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3633769cdfeadc830826ee6ff1da092d"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_is_natmode_en" ref="3633769cdfeadc830826ee6ff1da092d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_is_natmode_en           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Is the system in NAT mode?<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>true if it the system is configured for NAT mode. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a36b72241b333e6268eb9c0bc3761449"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_module_deinit" ref="a36b72241b333e6268eb9c0bc3761449" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_module_deinit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Deinitialize the module. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="83633147de37d3301648f68a352304ea"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_module_init" ref="83633147de37d3301648f68a352304ea" args="(vqec_syscfg_sig_mode_t mode, vqec_nat_proto_t proto, vqec_nat_init_params_t *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vqec_error_t vqec_nat_module_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vqec__syscfg_8h.html#2453bdcecf833d8893d760746c00e6f3">vqec_syscfg_sig_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_proto_t&nbsp;</td>
          <td class="paramname"> <em>proto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_init_params_t *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Initialize the NAT module.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>Current NAT mode. If NAT mode is standard, the null NAT protocol will be used. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>Protocol configuration parameters. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>VQEC_OK on success, error code on failure. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="c74d504ee5e09aabf2362fd74f414fb0"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_open_binding" ref="c74d504ee5e09aabf2362fd74f414fb0" args="(vqec_nat_bind_desc_t *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vqec_nat_bindid_t vqec_nat_open_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bind_desc_t *&nbsp;</td>
          <td class="paramname"> <em>desc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Request creation / opening of a binding for a 4-tuple: (inside IP addr, inside IP port, remote IP addr, remote port). A new binding is created and an identifier is returned for the binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>desc</em>&nbsp;</td><td>The attributes of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the created binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="11f5bd7a7ac577f32a1e90a2da0c78a2"></a><!-- doxytag: member="vqec_nat_interface.h::vqec_nat_query_binding" ref="11f5bd7a7ac577f32a1e90a2da0c78a2" args="(vqec_nat_bindid_t id, vqec_nat_bind_data_t *data, boolean refresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_query_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_bind_data_t *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>refresh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Query an open binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>All data associated with the binding / mapping. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>refresh</em>&nbsp;</td><td>Refresh the binding if it is incomplete. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>boolean</em>&nbsp;</td><td>Returns true if the query succeeds. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Aug 20 17:45:07 2012 for VQE-C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
