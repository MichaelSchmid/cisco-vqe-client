<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VQE-C: vqec_nat_api.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>vqec_nat_api.c File Reference</h1><code>#include &quot;<a class="el" href="vqec__nat__interface_8h.html">vqec_nat_interface.h</a>&quot;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &quot;vqec_error.h&quot;</code><br>
<code>#include &quot;vqec_debug.h&quot;</code><br>
<code>#include &quot;vqec_event.h&quot;</code><br>
<code>#include &quot;<a class="el" href="vqec__channel__private_8h.html">vqec_channel_private.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="vqec__lock__defs_8h.html">vqec_lock_defs.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvqec__nat__.html">vqec_nat_</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structvqec__nat__.html">vqec_nat_</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#97622474f7a948edb7da37161173b78e">vqec_nat_t</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#63f19664be82f295bbb41d506779c9c7">vqec_nat_log_error</a> (const char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#216ead5a9e5e1d509a76963c6963d1f6">vqec_nat_log_debug</a> (const char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#242d3fb466cdea27b1a8f0d8195c785a">vqec_nat_print</a> (const char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#3f50d5f51249a0c261a53d8fa07fb74e">vqec_nat_inject_tx</a> (vqec_nat_bindid_t id, vqec_nat_bind_desc_t *desc, char *buf, uint16_t len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#dcac0556e012248edc0b846b395b1e8d">vqec_nat_bind_update</a> (vqec_nat_bindid_t id, vqec_nat_bind_data_t *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vqec_event_ *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#3b08c8c3f11dbc4b1cc88d0697ad2a1c">vqec_nat_timer_create</a> (boolean periodic, vqec_nat_proto_evt_handler handler, void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#8be27c768eb9f6f160cc82ed0d184e85">vqec_nat_timer_destroy</a> (struct vqec_event_ *p_timer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#abcf1d19e9d57cf33706988e1323ee36">vqec_nat_timer_start</a> (struct vqec_event_ *p_timer, uint32_t timeout_msec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#50d1558966f5b43d5a690426f1b99507">vqec_nat_timer_stop</a> (struct vqec_event_ *p_timer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#5422862de25da395b7a61b47f0502fce">vqec_nat_acquire_lock</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#71744177776635f97d65302664112ce0">vqec_nat_release_lock</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#987450462ffbfe9f9f474c9ca74f97de">vqec_nat_state_to_str</a> (vqec_nat_bind_state_t state)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#a36b72241b333e6268eb9c0bc3761449">vqec_nat_module_deinit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vqec_error_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#83633147de37d3301648f68a352304ea">vqec_nat_module_init</a> (<a class="el" href="vqec__syscfg_8h.html#2453bdcecf833d8893d760746c00e6f3">vqec_syscfg_sig_mode_t</a> mode, vqec_nat_proto_t proto, vqec_nat_init_params_t *params)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">vqec_nat_bindid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#c74d504ee5e09aabf2362fd74f414fb0">vqec_nat_open_binding</a> (vqec_nat_bind_desc_t *desc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#cdca6fc3afa0147f86504eaaf531ca89">vqec_nat_close_binding</a> (vqec_nat_bindid_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#11f5bd7a7ac577f32a1e90a2da0c78a2">vqec_nat_query_binding</a> (vqec_nat_bindid_t id, vqec_nat_bind_data_t *data, boolean refresh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#09109143f3deb6fef2d3023a748f06c4">vqec_nat_fprint_binding</a> (vqec_nat_bindid_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#2d793836b5a6eb9960fd6a319a9865ad">vqec_nat_fprint_all_bindings</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#cc358fb4fc880240511b24b1003e9d10">vqec_nat_fprint_all_bindings_safe</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#a72964d0432ce95945839d0ce77d6bc7">vqec_nat_eject_to_binding</a> (vqec_nat_bindid_t id, char *buf, uint16_t len, in_addr_t source_ip, in_port_t source_port)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#3ff22996ca5865f197472e49376ff6fc">vqec_nat_enable_debug</a> (boolean verbose)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#64d18e023ac58deec48f819796f07917">vqec_nat_disable_debug</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#fcb807b3a55de54bfa848411d6bb1c34">vqec_nat_is_behind_nat</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#3633769cdfeadc830826ee6ff1da092d">vqec_nat_is_natmode_en</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structvqec__nat__.html">vqec_nat_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vqec__nat__api_8c.html#35eb7bb1ae64c55bac1ae98ae8d9644a">m_natmodule</a></td></tr>

</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="97622474f7a948edb7da37161173b78e"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_t" ref="97622474f7a948edb7da37161173b78e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvqec__nat__.html">vqec_nat_</a>  <a class="el" href="structvqec__nat__.html">vqec_nat_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5422862de25da395b7a61b47f0502fce"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_acquire_lock" ref="5422862de25da395b7a61b47f0502fce" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_acquire_lock           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Acquire vqec global lock. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="dcac0556e012248edc0b846b395b1e8d"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_bind_update" ref="dcac0556e012248edc0b846b395b1e8d" args="(vqec_nat_bindid_t id, vqec_nat_bind_data_t *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_bind_update           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_bind_data_t *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Callback by the protocol when a binding is updated.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>id</em>&nbsp;</td><td>Id of the binding updated. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>Data associated with the binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="cdca6fc3afa0147f86504eaaf531ca89"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_close_binding" ref="cdca6fc3afa0147f86504eaaf531ca89" args="(vqec_nat_bindid_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_close_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Close an open binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="64d18e023ac58deec48f819796f07917"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_disable_debug" ref="64d18e023ac58deec48f819796f07917" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_disable_debug           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Disable debugging on protocol. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="a72964d0432ce95945839d0ce77d6bc7"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_eject_to_binding" ref="a72964d0432ce95945839d0ce77d6bc7" args="(vqec_nat_bindid_t id, char *buf, uint16_t len, in_addr_t source_ip, in_port_t source_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_eject_to_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_addr_t&nbsp;</td>
          <td class="paramname"> <em>source_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in_port_t&nbsp;</td>
          <td class="paramname"> <em>source_port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Forward an eject packet to the protocol for a binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>Contents of the packet. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the packet. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>source_ip,:</em>&nbsp;</td><td>source ip of the packet (ip of the pak sender) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>source_port,:</em>&nbsp;</td><td>source port of the packet --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3ff22996ca5865f197472e49376ff6fc"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_enable_debug" ref="3ff22996ca5865f197472e49376ff6fc" args="(boolean verbose)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_enable_debug           </td>
          <td>(</td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>verbose</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Enable debugging on protocol.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>verbose</em>&nbsp;</td><td>Enable a more verbose mode. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="2d793836b5a6eb9960fd6a319a9865ad"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_fprint_all_bindings" ref="2d793836b5a6eb9960fd6a319a9865ad" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_all_bindings           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of all bindings. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="cc358fb4fc880240511b24b1003e9d10"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_fprint_all_bindings_safe" ref="cc358fb4fc880240511b24b1003e9d10" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_all_bindings_safe           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of all bindings, with acquisition of the global lock. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="09109143f3deb6fef2d3023a748f06c4"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_fprint_binding" ref="09109143f3deb6fef2d3023a748f06c4" args="(vqec_nat_bindid_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_fprint_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print the status of a binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3f50d5f51249a0c261a53d8fa07fb74e"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_inject_tx" ref="3f50d5f51249a0c261a53d8fa07fb74e" args="(vqec_nat_bindid_t id, vqec_nat_bind_desc_t *desc, char *buf, uint16_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_inject_tx           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_bind_desc_t *&nbsp;</td>
          <td class="paramname"> <em>desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Inject a NAT packet via the channel that owns the socket.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>id</em>&nbsp;</td><td>Id of the binding sending the NAT packet. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>desc</em>&nbsp;</td><td>Attributes of the binding. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buf</em>&nbsp;</td><td>Pointer to the buffer. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>len</em>&nbsp;</td><td>Length of the buffer. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>boolean</em>&nbsp;</td><td>Returns true if the successfully enqueued for transmit to the socket or to the dataplane. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fcb807b3a55de54bfa848411d6bb1c34"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_is_behind_nat" ref="fcb807b3a55de54bfa848411d6bb1c34" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_is_behind_nat           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Is the device behind a NAT?<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>false if it the protocol has determined that the device is not behind a NAT, true otherwise. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3633769cdfeadc830826ee6ff1da092d"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_is_natmode_en" ref="3633769cdfeadc830826ee6ff1da092d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_is_natmode_en           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Is the system in NAT mode?<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>true if it the system is configured for NAT mode. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="216ead5a9e5e1d509a76963c6963d1f6"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_log_debug" ref="216ead5a9e5e1d509a76963c6963d1f6" args="(const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_log_debug           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Log a debug message through the client.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>str</em>&nbsp;</td><td>Format string; variable arguments. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="63f19664be82f295bbb41d506779c9c7"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_log_error" ref="63f19664be82f295bbb41d506779c9c7" args="(const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_log_error           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Log an error through the client.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>str</em>&nbsp;</td><td>Format string; variable arguments. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a36b72241b333e6268eb9c0bc3761449"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_module_deinit" ref="a36b72241b333e6268eb9c0bc3761449" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_module_deinit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Deinitialize the module. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="83633147de37d3301648f68a352304ea"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_module_init" ref="83633147de37d3301648f68a352304ea" args="(vqec_syscfg_sig_mode_t mode, vqec_nat_proto_t proto, vqec_nat_init_params_t *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vqec_error_t vqec_nat_module_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vqec__syscfg_8h.html#2453bdcecf833d8893d760746c00e6f3">vqec_syscfg_sig_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_proto_t&nbsp;</td>
          <td class="paramname"> <em>proto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_init_params_t *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Initialize the NAT module.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mode</em>&nbsp;</td><td>Current NAT mode. If NAT mode is standard, the null NAT protocol will be used. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>params</em>&nbsp;</td><td>Protocol configuration parameters. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>Returns</em>&nbsp;</td><td>VQEC_OK on success, error code on failure. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="c74d504ee5e09aabf2362fd74f414fb0"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_open_binding" ref="c74d504ee5e09aabf2362fd74f414fb0" args="(vqec_nat_bind_desc_t *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vqec_nat_bindid_t vqec_nat_open_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bind_desc_t *&nbsp;</td>
          <td class="paramname"> <em>desc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Request creation / opening of a binding for a 4-tuple: (inside IP addr, inside IP port, remote IP addr, remote port). A new binding is created and an identifier is returned for the binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>desc</em>&nbsp;</td><td>The attributes of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the created binding. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="242d3fb466cdea27b1a8f0d8195c785a"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_print" ref="242d3fb466cdea27b1a8f0d8195c785a" args="(const char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_print           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Print a console message via the client.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>str</em>&nbsp;</td><td>Format string; variable arguments. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="11f5bd7a7ac577f32a1e90a2da0c78a2"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_query_binding" ref="11f5bd7a7ac577f32a1e90a2da0c78a2" args="(vqec_nat_bindid_t id, vqec_nat_bind_data_t *data, boolean refresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_query_binding           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bindid_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_bind_data_t *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>refresh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Query an open binding.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vqec_nat_bindid_t</em>&nbsp;</td><td>Identifier of the binding. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>All data associated with the binding / mapping. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>refresh</em>&nbsp;</td><td>Refresh the binding if it is incomplete. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>boolean</em>&nbsp;</td><td>Returns true if the query succeeds. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="71744177776635f97d65302664112ce0"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_release_lock" ref="71744177776635f97d65302664112ce0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_release_lock           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Release vqec global lock. --------------------------------------------------------------------------- 
</div>
</div><p>
<a class="anchor" name="987450462ffbfe9f9f474c9ca74f97de"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_state_to_str" ref="987450462ffbfe9f9f474c9ca74f97de" args="(vqec_nat_bind_state_t state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* vqec_nat_state_to_str           </td>
          <td>(</td>
          <td class="paramtype">vqec_nat_bind_state_t&nbsp;</td>
          <td class="paramname"> <em>state</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- A textual representation of the NAT binding state.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>state</em>&nbsp;</td><td>NAT binding state. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>char*</em>&nbsp;</td><td>Textual representation of the state. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3b08c8c3f11dbc4b1cc88d0697ad2a1c"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_timer_create" ref="3b08c8c3f11dbc4b1cc88d0697ad2a1c" args="(boolean periodic, vqec_nat_proto_evt_handler handler, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct vqec_event_* vqec_nat_timer_create           </td>
          <td>(</td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>periodic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vqec_nat_proto_evt_handler&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Create a libevent timer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>periodic</em>&nbsp;</td><td>If the timer is periodic, set to true. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>handler</em>&nbsp;</td><td>Handler associated with the timer. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>arg</em>&nbsp;</td><td>Argument to be echoed in the callback. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>vqec_event_*</em>&nbsp;</td><td>A pointer to an opaque event structure. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8be27c768eb9f6f160cc82ed0d184e85"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_timer_destroy" ref="8be27c768eb9f6f160cc82ed0d184e85" args="(struct vqec_event_ *p_timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vqec_nat_timer_destroy           </td>
          <td>(</td>
          <td class="paramtype">struct vqec_event_ *&nbsp;</td>
          <td class="paramname"> <em>p_timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Destroy a libevent timer. A destroy also stops a timer that is running.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>p_timer</em>&nbsp;</td><td>Pointer to the timer to be destroyed. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="abcf1d19e9d57cf33706988e1323ee36"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_timer_start" ref="abcf1d19e9d57cf33706988e1323ee36" args="(struct vqec_event_ *p_timer, uint32_t timeout_msec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_timer_start           </td>
          <td>(</td>
          <td class="paramtype">struct vqec_event_ *&nbsp;</td>
          <td class="paramname"> <em>p_timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>timeout_msec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Start a libevent timer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>p_timer</em>&nbsp;</td><td>Pointer to the timer to be start. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>timeout_msec</em>&nbsp;</td><td>Timeout in msecs. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>boolean</em>&nbsp;</td><td>Returns true if the timer was successfully started. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="50d1558966f5b43d5a690426f1b99507"></a><!-- doxytag: member="vqec_nat_api.c::vqec_nat_timer_stop" ref="50d1558966f5b43d5a690426f1b99507" args="(struct vqec_event_ *p_timer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean vqec_nat_timer_stop           </td>
          <td>(</td>
          <td class="paramtype">struct vqec_event_ *&nbsp;</td>
          <td class="paramname"> <em>p_timer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
--------------------------------------------------------------------------- Stop a libevent timer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>p_timer</em>&nbsp;</td><td>Pointer to the timer to be stopped. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>boolean</em>&nbsp;</td><td>Returns true if the timer was successfully stopped. --------------------------------------------------------------------------- </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="35eb7bb1ae64c55bac1ae98ae8d9644a"></a><!-- doxytag: member="vqec_nat_api.c::m_natmodule" ref="35eb7bb1ae64c55bac1ae98ae8d9644a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvqec__nat__.html">vqec_nat_t</a> <a class="el" href="vqec__nat__api_8c.html#35eb7bb1ae64c55bac1ae98ae8d9644a">m_natmodule</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Aug 20 17:45:07 2012 for VQE-C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
